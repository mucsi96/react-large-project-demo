(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{13:function(e,n,t){},14:function(e,n,t){},15:function(e,n,t){"use strict";t.r(n);var i=t(0),a=t.n(i),r=t(4),o=t.n(r),s=(t(13),t(6)),d=t.n(s),c=t(1);Object(c.a)(".Button-module_container__3PIsE {\n  vertical-align: top;\n  font-family: inherit;\n  padding: 10px 20px;\n  border: 1px solid white;\n  border-radius: 10px; }\n\n.Button-module_primary__pg7GC {\n  background-color: chocolate;\n  color: white; }\n\n.Button-module_secondary__2ce5v {\n  background-color: #cecece;\n  color: black; }\n\n.Button-module_disabled__1BllH {\n  opacity: 0.5; }\n");var l={container:"Button-module_container__3PIsE",primary:"Button-module_primary__pg7GC",secondary:"Button-module_secondary__2ce5v",disabled:"Button-module_disabled__1BllH"};const m=({children:e,disabled:n,primary:t,secondary:i,...r})=>a.a.createElement("button",Object.assign({},r,{type:"button",className:d()(l.container,{[l.primary]:t,[l.secondary]:i,[l.disabled]:n}),disabled:n}),e);Object(c.a)(".Spinner-module_container__5pI3h {\n  margin: 0 auto;\n  width: 50px;\n  height: 60px;\n  text-align: center;\n  font-size: 10px; }\n  .Spinner-module_container__5pI3h > * {\n    background-color: chocolate;\n    opacity: 0.5;\n    height: 100%;\n    width: 7px;\n    display: inline-block;\n    margin-right: 3px;\n    animation: Spinner-module_sk-stretchdelay__2FaZk 1.2s infinite ease-in-out; }\n  .Spinner-module_container__5pI3h :nth-child(2) {\n    animation-delay: -1.1s; }\n  .Spinner-module_container__5pI3h :nth-child(3) {\n    animation-delay: -1s; }\n  .Spinner-module_container__5pI3h :nth-child(4) {\n    animation-delay: -0.9s; }\n  .Spinner-module_container__5pI3h :nth-child(5) {\n    animation-delay: -0.8s; }\n\n@keyframes Spinner-module_sk-stretchdelay__2FaZk {\n  0%,\n  40%,\n  100% {\n    transform: scaleY(0.4); }\n  20% {\n    transform: scaleY(1); } }\n");var _={container:"Spinner-module_container__5pI3h","sk-stretchdelay":"Spinner-module_sk-stretchdelay__2FaZk"};const u=e=>a.a.createElement("div",Object.assign({},e,{className:_.container}),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null));var f=t(5);Object(f.a)(".FriendsList-module_container__5BYRF {\n  display: grid;\n  gap: 30px;\n  max-width: 600px; }\n\n.FriendsList-module_friend__39Kzv {\n  text-decoration: initial;\n  color: initial;\n  display: grid;\n  font-size: 2em;\n  grid-template-columns: auto 1fr auto;\n  gap: 20px; }\n\n.FriendsList-module_actions__28cgA {\n  margin: 5px; }\n\n.FriendsList-module_notifications__1jk-d {\n  position: fixed;\n  bottom: 10px;\n  right: 10px; }\n\n.FriendsList-module_error__QzOml {\n  background-color: #c14f24;\n  padding: 10px 20px;\n  border: 1px solid white;\n  border-radius: 10px;\n  color: white; }\n\n.FriendsList-module_info__3M61P {\n  background-color: #5168abf2;\n  padding: 10px 20px;\n  border: 1px solid white;\n  border-radius: 10px;\n  color: white; }\n\n.FriendsList-module_loadMore__3ECMp {\n  text-align: center; }\n");var p,E={container:"FriendsList-module_container__5BYRF",friend:"FriendsList-module_friend__39Kzv",actions:"FriendsList-module_actions__28cgA",notifications:"FriendsList-module_notifications__1jk-d",error:"FriendsList-module_error__QzOml",info:"FriendsList-module_info__3M61P",loadMore:"FriendsList-module_loadMore__3ECMp"};function g(e,n){switch(n.type){case"FETCH_API_START":return{isLoading:!0};case"FETCH_API_SUCCEED":return{isLoading:!1,data:n.payload,fetchArgs:n.fetchArgs};case"FETCH_API_FAILED":return{isLoading:!1,error:n.error,fetchArgs:n.fetchArgs};default:return e}}function h(e){const[n,t]=Object(i.useReducer)(g,{isLoading:!1}),a=Object(i.useMemo)((()=>({fetch(...n){t({type:"FETCH_API_START"}),e(...n).then((e=>t({type:"FETCH_API_SUCCEED",payload:e,fetchArgs:n}))).catch((e=>t({type:"FETCH_API_FAILED",error:e,fetchArgs:n})))}})),[e]);return Object.assign(a,n)}async function F(e,n={}){const{method:t,headers:i,body:a}=n,r=await window.fetch(e,{...t&&{method:t},headers:{...i,"Content-Type":"application/json"},...a&&{body:JSON.stringify(a)}}),o=await r.text(),s=o?JSON.parse(o):null;if(!r.ok)throw{message:"Failed to fetch data",response:s,status:r.status};return s}function y(e){var n,t;return F(null!==(t=null===(n=null===e||void 0===e?void 0:e._links.next)||void 0===n?void 0:n.href)&&void 0!==t?t:"/api/friends")}async function v(e,n){const{href:t,method:i="GET"}=e._links[n];await F(t,{method:i})}function O(e,n,t){return{...e,friends:e.friends.map((e=>e.id!==n?e:{...e,...t}))}}function A(e,n){switch(n.type){case"LOAD_FRIENDS":return{...e,friends:[...e.friends,...n.payload._embedded]};case"ADD_TO_FAVORITES":return O(e,n.id,{isFavorite:!0,isProcessing:!0});case"REMOVE_FROM_FAVORITES":return O(e,n.id,{isFavorite:!1,isProcessing:!0});case"PROCESSING_SUCCEED":return O(e,n.friend.id,{isProcessing:!1});case"PROCESSING_FAILED":switch(n.action){case p.ADD_TO_FAVORITE:return{...O(e,n.friend.id,{isProcessing:!1,isFavorite:!1}),notifications:[{key:n.notificationKey,message:`Adding ${n.friend.firstName} to favorite was not successful`},...e.notifications]};case p.REMOVE_FROM_FAVORITE:return{...O(e,n.friend.id,{isProcessing:!1,isFavorite:!0}),notifications:[{key:n.notificationKey,message:`Removing ${n.friend.firstName} from favorite was not successful`},...e.notifications]};default:return e}case"CLEAR_NOTIFICATION":return{...e,notifications:e.notifications.filter((({key:e})=>e!==n.key))};default:return e}}!function(e){e.ADD_TO_FAVORITE="addToFavorite",e.REMOVE_FROM_FAVORITE="removeFromFavorite"}(p||(p={}));const b=()=>{const{friends:e=[],isLoading:n,isEmpty:t,loadingErrorMessage:r,loadMore:o,addToFavorites:s,removeFromFavorites:d,notifications:c}=function(){var e,n,t,a;const r=h(y),o=h(v),[s,d]=Object(i.useReducer)(A,{friends:[],notifications:[]});return Object(i.useEffect)((()=>{r.fetch()}),[r]),Object(i.useEffect)((()=>{r.data&&d({type:"LOAD_FRIENDS",payload:r.data})}),[r.data]),Object(i.useEffect)((()=>{if(!o.fetchArgs)return;const[e,n]=o.fetchArgs,t=Date.now().toString();d({type:o.error?"PROCESSING_FAILED":"PROCESSING_SUCCEED",friend:e,action:n,notificationKey:t}),setTimeout((()=>d({type:"CLEAR_NOTIFICATION",key:t})),3e3)}),[o.data,o.error,o.fetchArgs]),{friends:s.friends,isLoading:r.isLoading,isEmpty:!s.friends.length,loadingErrorMessage:r.error&&`${null!==(t=null===(n=null===(e=r.error.response)||void 0===e?void 0:e.error)||void 0===n?void 0:n.message)&&void 0!==t?t:""} Status: ${null!==(a=r.error.status)&&void 0!==a?a:""}`,loadMore:r.data&&(c=r.data,c._links.next)?()=>r.fetch(r.data):void 0,addToFavorites:e=>{d({type:"ADD_TO_FAVORITES",id:e.id}),o.fetch(e,p.ADD_TO_FAVORITE)},removeFromFavorites:e=>{d({type:"REMOVE_FROM_FAVORITES",id:e.id}),o.fetch(e,p.REMOVE_FROM_FAVORITE)},notifications:s.notifications};var c}();return a.a.createElement("div",{"data-name":"friend-list",className:E.container},!!c.length&&a.a.createElement("div",{"data-name":"notifications",className:E.notifications},c.map((({key:e,message:n})=>a.a.createElement("p",{key:e,className:E.error},n)))),e.map((e=>{const{id:n,firstName:t,lastName:i,image:r}=e,o=[t,i].join(" ");return a.a.createElement("div",{key:n,"data-name":"friend",className:E.friend},a.a.createElement("img",{src:r,alt:o}),a.a.createElement("span",{"data-name":"full-name"},o),a.a.createElement("div",{className:E.actions},!e.isFavorite&&a.a.createElement(m,{primary:!0,onClick:()=>s(e),"data-name":"add-to-favorite",disabled:e.isProcessing},"Add to favorite"),e.isFavorite&&a.a.createElement(m,{secondary:!0,onClick:()=>d(e),"data-name":"remove-from-favorite",disabled:e.isProcessing},"Remove from favorite")))})),n?a.a.createElement(u,null):r?a.a.createElement("span",{"data-name":"message",className:E.error},r):t?a.a.createElement("span",{"data-name":"message",className:E.info},"No friends found :("):o?a.a.createElement("div",{className:E.loadMore},a.a.createElement(m,{secondary:!0,onClick:o,"data-name":"load-more"},"Load more...")):void 0)};t(14);var I=()=>a.a.createElement(b,null);let R=a.a.createElement(I,null);o.a.render(a.a.createElement(a.a.StrictMode,null,R),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.d81682ee.chunk.js.map