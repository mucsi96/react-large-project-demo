(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{1:function(e,n,t){"use strict";t.d(n,"a",(function(){return f})),t.d(n,"b",(function(){return l})),t.d(n,"c",(function(){return c})),t.d(n,"d",(function(){return m})),t.d(n,"e",(function(){return s})),t.d(n,"f",(function(){return u})),t.d(n,"g",(function(){return d}));let r=[],i=function(){const e=new URLSearchParams(window.location.search);return Object.fromEntries([...e.entries()].filter((([e])=>"mock"===e)).map((([,e])=>e.split("--"))))}();const a=!!Object.keys(i).length;let o=0;function s(e){r=[...r,...e]}function c(){return r}function d(e,n){a||(i[e]=n)}function l(e){return i[e]}function u(e,n){const t=JSON.parse(sessionStorage.getItem("mock-api-db")||"{}");sessionStorage.setItem("mock-api-db",JSON.stringify({...t,[e]:n}))}function m(e){return JSON.parse(sessionStorage.getItem("mock-api-db")||"{}")[e]}function f(){return o}},11:function(e,n,t){"use strict";t.d(n,"a",(function(){return a})),t.d(n,"b",(function(){return o}));var r=t(14),i=t(1);async function a({mock:e,match:n,url:t,method:r,body:a,headers:o}){let d=200,l=Object(i.a)(),u=!1,m=!1,f=await e.callback({url:t.pathname,method:r,headers:o,body:a&&JSON.parse(a),params:s(n,e),query:c(t.searchParams)},{status(e){d=e},delay(e){l=e},mockError(e){u=e},mockHTML(e){m=e}});return u&&(f={error:{message:"We couldn't process your request at this time"}}),l&&await new Promise((e=>window.setTimeout(e,l))),{body:m?"<html></html>":f?JSON.stringify(f):"",status:u?500:d}}function o(e,n){const t=Object(i.c)().map((e=>{const n=[];return{regexp:Object(r.a)(e.path,n),keys:n.map((e=>e.name)),...e}})).find((t=>t.regexp.test(e.pathname)&&(t.method||"GET")===n));return{match:t&&t.regexp.exec(e.pathname),mock:t}}function s(e,n){return e.reduce(((e,t,r)=>{const i=n.keys[r-1];return i?(void 0===t&&i in e||(e[i]=t),e):e}),{})}function c(e){const n={};return e.forEach(((e,t)=>{Array.isArray(n[t])?n[t]=[...n[t],e]:n[t]?n[t]=[n[t],e]:n[t]=e})),n}},24:function(e,n,t){"use strict";(function(e){t(35),t(21),t(12),t(11)}).call(this,t(5).Buffer)},39:function(e,n,t){},44:function(e,n){},46:function(e,n){},64:function(e,n,t){},65:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),a=t(19),o=t.n(a);t(39);async function s(e,n={}){const{method:t,headers:r,body:i}=n,a=await window.fetch(e,{...t&&{method:t},headers:{...r,"Content-Type":"application/json"},...i&&{body:JSON.stringify(i)}}),o=await a.text(),s=o?JSON.parse(o):null;if(!a.ok)throw{message:"Failed to fetch data",response:s,status:a.status};return s}t(67);function c(e,n){switch(n.type){case"FETCH_API_START":return{isLoading:!0};case"FETCH_API_SUCCEED":return{isLoading:!1,data:n.payload,fetchArgs:n.fetchArgs};case"FETCH_API_FAILED":return{isLoading:!1,error:n.error,fetchArgs:n.fetchArgs};default:return e}}function d(e){const[n,t]=Object(r.useReducer)(c,{isLoading:!1}),i=Object(r.useMemo)((()=>({fetch(...n){t({type:"FETCH_API_START"}),e(...n).then((e=>t({type:"FETCH_API_SUCCEED",payload:e,fetchArgs:n}))).catch((e=>t({type:"FETCH_API_FAILED",error:e,fetchArgs:n})))}})),[e]);return Object.assign(i,n)}var l=t(33),u=t.n(l),m=t(8);Object(m.a)(".Button-module_container__3PIsE {\n  vertical-align: top;\n  font-family: inherit;\n  padding: 10px 20px;\n  border: 1px solid white;\n  border-radius: 10px; }\n\n.Button-module_primary__pg7GC {\n  background-color: chocolate;\n  color: white; }\n\n.Button-module_secondary__2ce5v {\n  background-color: #cecece;\n  color: black; }\n\n.Button-module_disabled__1BllH {\n  opacity: 0.5; }\n");var f={container:"Button-module_container__3PIsE",primary:"Button-module_primary__pg7GC",secondary:"Button-module_secondary__2ce5v",disabled:"Button-module_disabled__1BllH"};const _=({children:e,disabled:n,primary:t,secondary:r,...a})=>i.a.createElement("button",Object.assign({},a,{type:"button",className:u()(f.container,{[f.primary]:t,[f.secondary]:r,[f.disabled]:n}),disabled:n}),e);Object(m.a)(".Spinner-module_container__5pI3h {\n  margin: 0 auto;\n  width: 50px;\n  height: 60px;\n  text-align: center;\n  font-size: 10px; }\n  .Spinner-module_container__5pI3h > * {\n    background-color: chocolate;\n    opacity: 0.5;\n    height: 100%;\n    width: 7px;\n    display: inline-block;\n    margin-right: 3px;\n    animation: Spinner-module_sk-stretchdelay__2FaZk 1.2s infinite ease-in-out; }\n  .Spinner-module_container__5pI3h :nth-child(2) {\n    animation-delay: -1.1s; }\n  .Spinner-module_container__5pI3h :nth-child(3) {\n    animation-delay: -1s; }\n  .Spinner-module_container__5pI3h :nth-child(4) {\n    animation-delay: -0.9s; }\n  .Spinner-module_container__5pI3h :nth-child(5) {\n    animation-delay: -0.8s; }\n\n@keyframes Spinner-module_sk-stretchdelay__2FaZk {\n  0%,\n  40%,\n  100% {\n    transform: scaleY(0.4); }\n  20% {\n    transform: scaleY(1); } }\n");var p={container:"Spinner-module_container__5pI3h","sk-stretchdelay":"Spinner-module_sk-stretchdelay__2FaZk"};const h=e=>i.a.createElement("div",Object.assign({},e,{className:p.container}),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null));Object(m.a)(".withErrorBoundary-module_error__XUb1w {\n  background-color: #c14f24;\n  padding: 10px 20px;\n  border: 1px solid white;\n  border-radius: 10px;\n  color: white; }\n");t(20);var E=t(34);Object(E.a)(".FriendsList-module_container__5BYRF {\n  display: grid;\n  gap: 30px;\n  max-width: 600px; }\n\n.FriendsList-module_friend__39Kzv {\n  text-decoration: initial;\n  color: initial;\n  display: grid;\n  font-size: 2em;\n  grid-template-columns: auto 1fr auto;\n  gap: 20px; }\n\n.FriendsList-module_actions__28cgA {\n  margin: 5px; }\n\n.FriendsList-module_notifications__1jk-d {\n  position: fixed;\n  bottom: 10px;\n  right: 10px; }\n\n.FriendsList-module_error__QzOml {\n  background-color: #c14f24;\n  padding: 10px 20px;\n  border: 1px solid white;\n  border-radius: 10px;\n  color: white; }\n\n.FriendsList-module_info__3M61P {\n  background-color: #5168abf2;\n  padding: 10px 20px;\n  border: 1px solid white;\n  border-radius: 10px;\n  color: white; }\n\n.FriendsList-module_loadMore__3ECMp {\n  text-align: center; }\n");var g,y={container:"FriendsList-module_container__5BYRF",friend:"FriendsList-module_friend__39Kzv",actions:"FriendsList-module_actions__28cgA",notifications:"FriendsList-module_notifications__1jk-d",error:"FriendsList-module_error__QzOml",info:"FriendsList-module_info__3M61P",loadMore:"FriendsList-module_loadMore__3ECMp"};function F(e){var n,t;return s(null!==(t=null===(n=null===e||void 0===e?void 0:e._links.next)||void 0===n?void 0:n.href)&&void 0!==t?t:"/api/friends")}async function O(e,n){const{href:t,method:r="GET"}=e._links[n];await s(t,{method:r})}!function(e){e.ADD_TO_FAVORITE="addToFavorite",e.REMOVE_FROM_FAVORITE="removeFromFavorite"}(g||(g={}));t(1),t(11),t(14);var v;t(24);function b(e,n,t){return{...e,friends:e.friends.map((e=>e.id!==n?e:{...e,...t}))}}function A(e,n){switch(n.type){case"LOAD_FRIENDS":return{...e,friends:[...e.friends,...n.payload._embedded]};case"ADD_TO_FAVORITES":return b(e,n.id,{isFavorite:!0,isProcessing:!0});case"REMOVE_FROM_FAVORITES":return b(e,n.id,{isFavorite:!1,isProcessing:!0});case"PROCESSING_SUCCEED":return b(e,n.friend.id,{isProcessing:!1});case"PROCESSING_FAILED":switch(n.action){case g.ADD_TO_FAVORITE:return{...b(e,n.friend.id,{isProcessing:!1,isFavorite:!1}),notifications:[{key:n.notificationKey,message:`Adding ${n.friend.firstName} to favorite was not successful`},...e.notifications]};case g.REMOVE_FROM_FAVORITE:return{...b(e,n.friend.id,{isProcessing:!1,isFavorite:!0}),notifications:[{key:n.notificationKey,message:`Removing ${n.friend.firstName} from favorite was not successful`},...e.notifications]};default:return e}case"CLEAR_NOTIFICATION":return{...e,notifications:e.notifications.filter((({key:e})=>e!==n.key))};default:return e}}!function(e){e.NORMAL="NORMAL",e.EMPTY="EMPTY",e.LOADING_FAILURE="LOADING_FAILURE",e.PROCESSING_FAILURE="PROCESSING_FAILURE"}(v||(v={}));const I=()=>{const{friends:e=[],isLoading:n,isEmpty:t,loadingErrorMessage:a,loadMore:o,addToFavorites:s,removeFromFavorites:c,notifications:l}=function(){var e,n,t,i;const a=d(F),o=d(O),[s,c]=Object(r.useReducer)(A,{friends:[],notifications:[]});return Object(r.useEffect)((()=>{a.fetch()}),[a]),Object(r.useEffect)((()=>{a.data&&c({type:"LOAD_FRIENDS",payload:a.data})}),[a.data]),Object(r.useEffect)((()=>{if(!o.fetchArgs)return;const[e,n]=o.fetchArgs,t=Date.now().toString();c({type:o.error?"PROCESSING_FAILED":"PROCESSING_SUCCEED",friend:e,action:n,notificationKey:t}),setTimeout((()=>c({type:"CLEAR_NOTIFICATION",key:t})),3e3)}),[o.data,o.error,o.fetchArgs]),{friends:s.friends,isLoading:a.isLoading,isEmpty:!s.friends.length,loadingErrorMessage:a.error&&`${null!==(t=null===(n=null===(e=a.error.response)||void 0===e?void 0:e.error)||void 0===n?void 0:n.message)&&void 0!==t?t:""} Status: ${null!==(i=a.error.status)&&void 0!==i?i:""}`,loadMore:a.data&&(l=a.data,l._links.next)?()=>a.fetch(a.data):void 0,addToFavorites:e=>{c({type:"ADD_TO_FAVORITES",id:e.id}),o.fetch(e,g.ADD_TO_FAVORITE)},removeFromFavorites:e=>{c({type:"REMOVE_FROM_FAVORITES",id:e.id}),o.fetch(e,g.REMOVE_FROM_FAVORITE)},notifications:s.notifications};var l}();return i.a.createElement("div",{"data-name":"friend-list",className:y.container},!!l.length&&i.a.createElement("div",{"data-name":"notifications",className:y.notifications},l.map((({key:e,message:n})=>i.a.createElement("p",{key:e,className:y.error},n)))),e.map((e=>{const{id:n,firstName:t,lastName:r,image:a}=e,o=[t,r].join(" ");return i.a.createElement("div",{key:n,"data-name":"friend",className:y.friend},i.a.createElement("img",{src:a,alt:o}),i.a.createElement("span",{"data-name":"full-name"},o),i.a.createElement("div",{className:y.actions},!e.isFavorite&&i.a.createElement(_,{primary:!0,onClick:()=>s(e),"data-name":"add-to-favorite",disabled:e.isProcessing},"Add to favorite"),e.isFavorite&&i.a.createElement(_,{secondary:!0,onClick:()=>c(e),"data-name":"remove-from-favorite",disabled:e.isProcessing},"Remove from favorite")))})),n?i.a.createElement(h,null):a?i.a.createElement("span",{"data-name":"message",className:y.error},a):t?i.a.createElement("span",{"data-name":"message",className:y.info},"No friends found :("):o?i.a.createElement("div",{className:y.loadMore},i.a.createElement(_,{secondary:!0,onClick:o,"data-name":"load-more"},"Load more...")):void 0)};t(64);var S=()=>i.a.createElement(I,null);let k=i.a.createElement(S,null);o.a.render(i.a.createElement(i.a.StrictMode,null,k),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.a031fb32.chunk.js.map