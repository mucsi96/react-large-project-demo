(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{1:function(e,n,t){"use strict";t.d(n,"a",(function(){return f})),t.d(n,"b",(function(){return l})),t.d(n,"c",(function(){return c})),t.d(n,"d",(function(){return m})),t.d(n,"e",(function(){return s})),t.d(n,"f",(function(){return u})),t.d(n,"g",(function(){return d}));let r=[],i=function(){const e=new URLSearchParams(window.location.search);return Object.fromEntries([...e.entries()].filter((([e])=>"mock"===e)).map((([,e])=>e.split("--"))))}();const a=!!Object.keys(i).length;let o=0;function s(e){r=[...r,...e]}function c(){return r}function d(e,n){a||(i[e]=n)}function l(e){return i[e]}function u(e,n){const t=JSON.parse(sessionStorage.getItem("mock-api-db")||"{}");sessionStorage.setItem("mock-api-db",JSON.stringify({...t,[e]:n}))}function m(e){return JSON.parse(sessionStorage.getItem("mock-api-db")||"{}")[e]}function f(){return o}},10:function(e,n,t){"use strict";t.d(n,"a",(function(){return a})),t.d(n,"b",(function(){return o}));var r=t(13),i=t(1);async function a({mock:e,match:n,url:t,method:r,body:a,headers:o}){let d=200,l=Object(i.a)(),u=!1,m=!1,f=await e.callback({url:t.pathname,method:r,headers:o,body:a&&JSON.parse(a),params:s(n,e),query:c(t.searchParams)},{status(e){d=e},delay(e){l=e},mockError(e){u=e},mockHTML(e){m=e}});return u&&(f={error:{message:"We couldn't process your request at this time"}}),l&&await new Promise((e=>window.setTimeout(e,l))),{body:m?"<html></html>":f?JSON.stringify(f):"",status:u?500:d}}function o(e,n){const t=Object(i.c)().map((e=>{const n=[];return{regexp:Object(r.a)(e.path,n),keys:n.map((e=>e.name)),...e}})).find((t=>t.regexp.test(e.pathname)&&(t.method||"GET")===n));return{match:t&&t.regexp.exec(e.pathname),mock:t}}function s(e,n){return e.reduce(((e,t,r)=>{const i=n.keys[r-1];return i?(void 0===t&&i in e||(e[i]=t),e):e}),{})}function c(e){const n={};return e.forEach(((e,t)=>{Array.isArray(n[t])?n[t]=[...n[t],e]:n[t]?n[t]=[n[t],e]:n[t]=e})),n}},24:function(e,n,t){"use strict";(function(e){t(35),t(21),t(14),t(10)}).call(this,t(5).Buffer)},39:function(e,n,t){},44:function(e,n){},46:function(e,n){},64:function(e,n,t){},65:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),a=t(19),o=t.n(a),s=(t(39),t(67));async function c(e,n={}){const{method:t,headers:r,body:i}=n;try{return(await Object(s.a)({url:e,...t&&{method:t},...i&&{body:i},headers:{...r,"Content-Type":"application/json"}}).toPromise()).response}catch(a){const e=a;throw{message:e.message,response:e.response,status:e.status}}}function d(e,n){switch(n.type){case"FETCH_API_START":return{isLoading:!0};case"FETCH_API_SUCCEED":return{isLoading:!1,data:n.payload,fetchArgs:n.fetchArgs};case"FETCH_API_FAILED":return{isLoading:!1,error:n.error,fetchArgs:n.fetchArgs};default:return e}}function l(e){const[n,t]=Object(r.useReducer)(d,{isLoading:!1}),i=Object(r.useMemo)((()=>({fetch(...n){t({type:"FETCH_API_START"}),e(...n).then((e=>t({type:"FETCH_API_SUCCEED",payload:e,fetchArgs:n}))).catch((e=>t({type:"FETCH_API_FAILED",error:e,fetchArgs:n})))}})),[e]);return Object.assign(i,n)}var u=t(33),m=t.n(u),f=t(12);Object(f.a)(".Button-module_container__3PIsE {\n  vertical-align: top;\n  font-family: inherit;\n  padding: 10px 20px;\n  border: 1px solid white;\n  border-radius: 10px; }\n\n.Button-module_primary__pg7GC {\n  background-color: chocolate;\n  color: white; }\n\n.Button-module_secondary__2ce5v {\n  background-color: #cecece;\n  color: black; }\n\n.Button-module_disabled__1BllH {\n  opacity: 0.5; }\n");var _={container:"Button-module_container__3PIsE",primary:"Button-module_primary__pg7GC",secondary:"Button-module_secondary__2ce5v",disabled:"Button-module_disabled__1BllH"};const p=({children:e,disabled:n,primary:t,secondary:r,...a})=>i.a.createElement("button",Object.assign({},a,{type:"button",className:m()(_.container,{[_.primary]:t,[_.secondary]:r,[_.disabled]:n}),disabled:n}),e);Object(f.a)(".Spinner-module_container__5pI3h {\n  margin: 0 auto;\n  width: 50px;\n  height: 60px;\n  text-align: center;\n  font-size: 10px; }\n  .Spinner-module_container__5pI3h > * {\n    background-color: chocolate;\n    opacity: 0.5;\n    height: 100%;\n    width: 7px;\n    display: inline-block;\n    margin-right: 3px;\n    animation: Spinner-module_sk-stretchdelay__2FaZk 1.2s infinite ease-in-out; }\n  .Spinner-module_container__5pI3h :nth-child(2) {\n    animation-delay: -1.1s; }\n  .Spinner-module_container__5pI3h :nth-child(3) {\n    animation-delay: -1s; }\n  .Spinner-module_container__5pI3h :nth-child(4) {\n    animation-delay: -0.9s; }\n  .Spinner-module_container__5pI3h :nth-child(5) {\n    animation-delay: -0.8s; }\n\n@keyframes Spinner-module_sk-stretchdelay__2FaZk {\n  0%,\n  40%,\n  100% {\n    transform: scaleY(0.4); }\n  20% {\n    transform: scaleY(1); } }\n");var E={container:"Spinner-module_container__5pI3h","sk-stretchdelay":"Spinner-module_sk-stretchdelay__2FaZk"};const h=e=>i.a.createElement("div",Object.assign({},e,{className:E.container}),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null));t(20);var g=t(34);Object(g.a)(".FriendsList-module_container__5BYRF {\n  display: grid;\n  gap: 30px;\n  max-width: 600px; }\n\n.FriendsList-module_friend__39Kzv {\n  text-decoration: initial;\n  color: initial;\n  display: grid;\n  font-size: 2em;\n  grid-template-columns: auto 1fr auto;\n  gap: 20px; }\n\n.FriendsList-module_actions__28cgA {\n  margin: 5px; }\n\n.FriendsList-module_notifications__1jk-d {\n  position: fixed;\n  bottom: 10px;\n  right: 10px; }\n\n.FriendsList-module_error__QzOml {\n  background-color: #c14f24;\n  padding: 10px 20px;\n  border: 1px solid white;\n  border-radius: 10px;\n  color: white; }\n\n.FriendsList-module_info__3M61P {\n  background-color: #5168abf2;\n  padding: 10px 20px;\n  border: 1px solid white;\n  border-radius: 10px;\n  color: white; }\n\n.FriendsList-module_loadMore__3ECMp {\n  text-align: center; }\n");var y,F={container:"FriendsList-module_container__5BYRF",friend:"FriendsList-module_friend__39Kzv",actions:"FriendsList-module_actions__28cgA",notifications:"FriendsList-module_notifications__1jk-d",error:"FriendsList-module_error__QzOml",info:"FriendsList-module_info__3M61P",loadMore:"FriendsList-module_loadMore__3ECMp"};function v(e){var n,t;return c(null!==(t=null===(n=null===e||void 0===e?void 0:e._links.next)||void 0===n?void 0:n.href)&&void 0!==t?t:"/api/friends")}async function O(e,n){const{href:t,method:r="GET"}=e._links[n];await c(t,{method:r})}!function(e){e.ADD_TO_FAVORITE="addToFavorite",e.REMOVE_FROM_FAVORITE="removeFromFavorite"}(y||(y={}));t(1),t(10),t(13);var b;t(24);function A(e,n,t){return{...e,friends:e.friends.map((e=>e.id!==n?e:{...e,...t}))}}function I(e,n){switch(n.type){case"LOAD_FRIENDS":return{...e,friends:[...e.friends,...n.payload._embedded]};case"ADD_TO_FAVORITES":return A(e,n.id,{isFavorite:!0,isProcessing:!0});case"REMOVE_FROM_FAVORITES":return A(e,n.id,{isFavorite:!1,isProcessing:!0});case"PROCESSING_SUCCEED":return A(e,n.friend.id,{isProcessing:!1});case"PROCESSING_FAILED":switch(n.action){case y.ADD_TO_FAVORITE:return{...A(e,n.friend.id,{isProcessing:!1,isFavorite:!1}),notifications:[{key:n.notificationKey,message:`Adding ${n.friend.firstName} to favorite was not successful`},...e.notifications]};case y.REMOVE_FROM_FAVORITE:return{...A(e,n.friend.id,{isProcessing:!1,isFavorite:!0}),notifications:[{key:n.notificationKey,message:`Removing ${n.friend.firstName} from favorite was not successful`},...e.notifications]};default:return e}case"CLEAR_NOTIFICATION":return{...e,notifications:e.notifications.filter((({key:e})=>e!==n.key))};default:return e}}!function(e){e.NORMAL="NORMAL",e.EMPTY="EMPTY",e.LOADING_FAILURE="LOADING_FAILURE",e.PROCESSING_FAILURE="PROCESSING_FAILURE"}(b||(b={}));const S=()=>{const{friends:e=[],isLoading:n,isEmpty:t,loadingErrorMessage:a,loadMore:o,addToFavorites:s,removeFromFavorites:c,notifications:d}=function(){var e,n,t,i;const a=l(v),o=l(O),[s,c]=Object(r.useReducer)(I,{friends:[],notifications:[]});return Object(r.useEffect)((()=>{a.fetch()}),[a]),Object(r.useEffect)((()=>{a.data&&c({type:"LOAD_FRIENDS",payload:a.data})}),[a.data]),Object(r.useEffect)((()=>{if(!o.fetchArgs)return;const[e,n]=o.fetchArgs,t=Date.now().toString();c({type:o.error?"PROCESSING_FAILED":"PROCESSING_SUCCEED",friend:e,action:n,notificationKey:t}),setTimeout((()=>c({type:"CLEAR_NOTIFICATION",key:t})),3e3)}),[o.data,o.error,o.fetchArgs]),{friends:s.friends,isLoading:a.isLoading,isEmpty:!s.friends.length,loadingErrorMessage:a.error&&`${null!==(t=null===(n=null===(e=a.error.response)||void 0===e?void 0:e.error)||void 0===n?void 0:n.message)&&void 0!==t?t:""} Status: ${null!==(i=a.error.status)&&void 0!==i?i:""}`,loadMore:a.data&&(d=a.data,d._links.next)?()=>a.fetch(a.data):void 0,addToFavorites:e=>{c({type:"ADD_TO_FAVORITES",id:e.id}),o.fetch(e,y.ADD_TO_FAVORITE)},removeFromFavorites:e=>{c({type:"REMOVE_FROM_FAVORITES",id:e.id}),o.fetch(e,y.REMOVE_FROM_FAVORITE)},notifications:s.notifications};var d}();return i.a.createElement("div",{"data-name":"friend-list",className:F.container},!!d.length&&i.a.createElement("div",{"data-name":"notifications",className:F.notifications},d.map((({key:e,message:n})=>i.a.createElement("p",{key:e,className:F.error},n)))),e.map((e=>{const{id:n,firstName:t,lastName:r,image:a}=e,o=[t,r].join(" ");return i.a.createElement("div",{key:n,"data-name":"friend",className:F.friend},i.a.createElement("img",{src:a,alt:o}),i.a.createElement("span",{"data-name":"full-name"},o),i.a.createElement("div",{className:F.actions},!e.isFavorite&&i.a.createElement(p,{primary:!0,onClick:()=>s(e),"data-name":"add-to-favorite",disabled:e.isProcessing},"Add to favorite"),e.isFavorite&&i.a.createElement(p,{secondary:!0,onClick:()=>c(e),"data-name":"remove-from-favorite",disabled:e.isProcessing},"Remove from favorite")))})),n?i.a.createElement(h,null):a?i.a.createElement("span",{"data-name":"message",className:F.error},a):t?i.a.createElement("span",{"data-name":"message",className:F.info},"No friends found :("):o?i.a.createElement("div",{className:F.loadMore},i.a.createElement(p,{secondary:!0,onClick:o,"data-name":"load-more"},"Load more...")):void 0)};t(64);var k=()=>i.a.createElement(S,null);let R=i.a.createElement(k,null);o.a.render(i.a.createElement(i.a.StrictMode,null,R),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.c285200f.chunk.js.map